# メールアドレス確認を無効にする（手当管理システム）

本システムでは**メールアドレス確認（Confirm email）を使いません**。登録後すぐにログインできるようにするため、Supabase 側で次の設定を行ってください。

---

## 1. 新規プロジェクトで「Confirm email」をオフにする

1. **Supabase Dashboard** を開く  
   https://app.supabase.com → 対象プロジェクトを選択
2. 左メニュー **Authentication** → **Providers**
3. **Email** を開く
4. **「Confirm email」** のチェックを**外す**
5. **Save** をクリック

これで、新規登録したユーザーは確認メールなしでログインできます。

---

## 2. 既に「Confirm email」が有効だったプロジェクトの場合

すでにユーザーがいる場合、上記の設定だけでは**既存ユーザー**は「メールアドレスが確認されていません」のままログインできません。次のどちらかを行ってください。

### 方法A: ダッシュボードで Confirm email をオフにする（推奨）

上記「1.」と同じ手順で **Confirm email** をオフにします。  
オフにした時点で、**新規登録分**は確認なしでログインできます。

### 方法B: 既存ユーザーを「確認済み」にする

既存のユーザーをそのままログイン可能にするには、SQL で `email_confirmed_at` を設定します。

1. Supabase Dashboard → **SQL Editor** → New query
2. プロジェクト内の **`CONFIRM_EXISTING_USERS_EMAIL.sql`** の内容を貼り付けて **Run** で実行
3. 実行後、該当ユーザーは確認メールなしでログインできます。

---

## まとめ

| 作業 | 手順 |
|------|------|
| 新規プロジェクト | Authentication → Providers → Email → **Confirm email をオフ** |
| 既存プロジェクト | 上記をオフ + 必要なら上記 SQL で既存ユーザーを確認済みにする |

設定後、アプリ側では「メールアドレスの確認」を促すメッセージは出さず、ログイン・新規登録はそのまま利用できます。
